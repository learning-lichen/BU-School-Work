# NOTE: Row value = (7 * row_number) + 1

ip_matrix = Array.new(8)
ip_matrix[0] = [58, 50, 42, 34, 26, 18, 10, 2]
ip_matrix[1] = [60, 52, 44, 36, 28, 20, 12, 4]
ip_matrix[2] = [62, 54, 46, 38, 30, 22, 14, 6]
ip_matrix[3] = [64, 56, 48, 40, 32, 24, 16, 8]
ip_matrix[4] = [57, 49, 41, 33, 25, 17, 9, 1]
ip_matrix[5] = [59, 51, 43, 35, 27, 19, 11, 3]
ip_matrix[6] = [61, 53, 45, 37, 29, 21, 13, 5]
ip_matrix[7] = [63, 55, 47, 39, 31, 23, 15, 7]

key = "0000000100100011010001010110011110001001101010111100110111101111".split(//)
ip = Array.new(56)
key_position = 0

ip_matrix.each do |matrix_row|
  matrix_row.each do |perm|
    ip[key_position] = key[perm - 1]
    key_position += 1
  end
end

key_position = 0
ip_out = ""

ip.each do |k|
  ip_out << k
  key_position += 1
  ip_out << " " if key_position % 4 == 0
end

p ip_out
